---
title: "Core Endpoints"
sidebarTitle: "Core Endpoints"
'og:description': ""
---

## Overview

Tonder's Direct API provides a streamlined set of endpoints for processing payments and withdrawals. The unified design eliminates complex multi-step integrations, allowing you to handle transactions through a single endpoint.

## Endpoint Summary

### Process Transaction

```http
POST /process/
```

Unified endpoint for processing both payments and withdrawals.

### Check Transaction Status

```http
GET /transactions/{transaction_id}/
```

Retrieve the current status and details of a specific transaction.

## Process Transaction Endpoint

### POST /process/

This is the primary endpoint for creating and processing both payments and withdrawals through a single API call.

**URL:** `POST /process/`

**Headers:**

```http
Authorization: Token your_api_key
X-Signature-Transaction: calculated_hmac_signature
Content-Type: application/json
```

**Request Body Structure:** The request body varies based on the `operation_type` field:

```json
{
  "operation_type": "payment|withdrawal",
  "amount": 1000.50,
  "currency": "MXN",
  "customer": {
    "name": "Customer Name",
    "email": "customer@email.com"
  },
  // Additional fields based on operation type
}
```

### Payment Processing

For payment operations (`operation_type: "payment"`):

**Basic Payment Request:**

```json
{
  "operation_type": "payment",
  "amount": 150.00,
  "currency": "MXN",
  "customer": {
    "name": "Ana María Rodríguez",
    "email": "ana.rodriguez@email.com"
  },
  "payment_method": {
    "type": "CARD",
    "card_number": "9230-0892-4469-1474",
    "cardholder_name": "c05d89b2-299c-4f93-b49a-42be00d3b64b",
    "cvv": "d31f0da3-0ed3-4ad8-8b68-14c2669a99a7",
    "expiration_month": "e401a32e-4174-424f-9688-727005f6a80e",
    "expiration_year": "bd9ccc23-3d00-4109-9626-fc6581389063"
  },
  "client_reference": "order-789",
  "return_url": "https://mystore.com/payment/return"
}
```

**Payment Response:**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "operation_type": "payment",
  "status": "authorized",
  "amount": 150.00,
  "currency": "MXN",
  "merchant_reference": "order-789",
  "payment_id": 12345,
  "transaction_id": "txn_abc123",
  "provider": "stripe",
  "created_at": "2024-07-26T10:30:00Z",
  "status_code": 201
}
```

### Withdrawal Processing

For withdrawal operations (`operation_type: "withdrawal"`):

**SPEI Withdrawal Request:**

```json
{
  "operation_type": "withdrawal",
  "amount": 750.00,
  "currency": "MXN",
  "reference": "payout-001",
  "transfer_method": "SPEI",
  "description": "Commission payment",
  "beneficiary": {
    "account": "012345678901234567",
    "name": "Roberto Martínez García",
    "rfc": "MAGR850920XY1",
    "institution": "40012",
    "email": "roberto.martinez@email.com"
  }
}
```

**Withdrawal Response:**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "operation_type": "withdrawal",
  "status": "processing",
  "amount": 750.00,
  "currency": "MXN",
  "merchant_reference": "payout-001",
  "created_at": "2024-07-26T10:30:00Z",
  "status_code": 201
}
```

## Transaction Status Endpoint

### GET /transactions/{transaction_id}/

Retrieve the current status and details of any transaction (payment or withdrawal).

**URL:** `GET /transactions/{transaction_id}/`

**Headers:**

```http
Authorization: Token your_api_key
X-Signature-Transaction: calculated_hmac_signature
Content-Type: application/json
```

**Path Parameters:**

* `transaction_id` (string, required): The unique transaction identifier returned from the `/process/` endpoint

**Example Request:**

```http
GET /transactions/550e8400-e29b-41d4-a716-446655440000/
Authorization: Token your_api_key
X-Signature-Transaction: 9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08
Content-Type: application/json
```

**Example Response:**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "operation_type": "payment",
  "status": "success",
  "amount": 150.00,
  "currency": "MXN",
  "merchant_reference": "order-789",
  "created_at": "2024-07-26T10:30:00Z",
  "updated_at": "2024-07-26T10:32:15Z",
  "completion_details": {
    "completed_at": "2024-07-26T10:32:15Z",
    "authorization_code": "AUTH123456"
  }
}
```

## Response Codes

### Success Codes

| Code | Description | When Used                           |
| ---- | ----------- | ----------------------------------- |
| 200  | OK          | Status check successful             |
| 201  | Created     | Transaction created successfully    |
| 202  | Accepted    | Transaction accepted for processing |

### Error Codes

| Code | Description      | Action Required      |
| ---- | ---------------- | -------------------- |
| 400  | Bad Request      | Fix request format   |
| 401  | Unauthorized     | Check authentication |
| 402  | Payment Required | Payment declined     |
| 404  | Not Found        | Check transaction ID |
| 422  | Validation Error | Fix request data     |
| 429  | Rate Limited     | Retry with backoff   |
| 500  | Server Error     | Retry request        |

## Implementation Examples

### Python Implementation

```python
import requests
import json

class TonderAPI:
    def __init__(self, api_key, base_url):
        self.api_key = api_key
        self.base_url = base_url
        self.headers = {
            'Authorization': f'Token {api_key}',
            'Content-Type': 'application/json'
        }
    
    def process_payment(self, payment_data):
        """Process a payment transaction"""
        response = requests.post(
            f"{self.base_url}process/",
            headers=self.headers,
            json=payment_data
        )
        
        if response.status_code in [200, 201, 202]:
            return response.json()
        else:
            raise Exception(f"Payment failed: {response.status_code} - {response.text}")
    
    def process_withdrawal(self, withdrawal_data):
        """Process a withdrawal transaction"""
        response = requests.post(
            f"{self.base_url}process/",
            headers=self.headers,
            json=withdrawal_data
        )
        
        if response.status_code in [200, 201, 202]:
            return response.json()
        else:
            raise Exception(f"Withdrawal failed: {response.status_code} - {response.text}")
    
    def get_transaction_status(self, transaction_id):
        """Get transaction status"""
        response = requests.get(
            f"{self.base_url}transactions/{transaction_id}/",
            headers=self.headers
        )
        
        if response.status_code == 200:
            return response.json()
        else:
            raise Exception(f"Status check failed: {response.status_code} - {response.text}")

# Example usage
def main():
    # Initialize API client
    api = TonderAPI(
        api_key="your_api_key",
        base_url="https://stage.tonder.io/api/v1/"
    )
    
    # Process a payment
    payment_data = {
        "operation_type": "payment",
        "amount": 100.00,
        "currency": "MXN",
        "customer": {
            "name": "Test Customer",
            "email": "test@example.com"
        },
        "payment_method": {
            "type": "CARD",
            "card_number": "4242424242424242",
            "cardholder_name": "Test Customer",
            "cvv": "123",
            "expiration_month": "12",
            "expiration_year": "2027"
        },
        "client_reference": "test-001"
    }
    
    try:
        # Process payment
        payment_result = api.process_payment(payment_data)
        print(f"Payment processed: {payment_result['id']}")
        
        # Check status
        status = api.get_transaction_status(payment_result['id'])
        print(f"Payment status: {status['status']}")
        
    except Exception as e:
        print(f"Error: {e}")
```

### Java Implementation

```java
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.net.URI;
import com.fasterxml.jackson.databind.ObjectMapper;

public class TonderAPI {
    private final String apiKey;
    private final String baseUrl;
    private final HttpClient client;
    private final ObjectMapper mapper;
    
    public TonderAPI(String apiKey, String baseUrl) {
        this.apiKey = apiKey;
        this.baseUrl = baseUrl;
        this.client = HttpClient.newHttpClient();
        this.mapper = new ObjectMapper();
    }
    
    public Map<String, Object> processTransaction(Map<String, Object> transactionData) {
        try {
            String jsonBody = mapper.writeValueAsString(transactionData);
            
            HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create(baseUrl + "process/"))
                .header("Authorization", "Token " + apiKey)
                .header("Content-Type", "application/json")
                .POST(HttpRequest.BodyPublishers.ofString(jsonBody))
                .build();
            
            HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
            
            if (response.statusCode() >= 200 && response.statusCode() < 300) {
                return mapper.readValue(response.body(), Map.class);
            } else {
                throw new RuntimeException("Transaction failed: " + response.statusCode());
            }
            
        } catch (Exception e) {
            throw new RuntimeException("Transaction processing failed", e);
        }
    }
    
    public Map<String, Object> getTransactionStatus(String transactionId) {
        try {
            HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create(baseUrl + "transactions/" + transactionId + "/"))
                .header("Authorization", "Token " + apiKey)
                .header("Content-Type", "application/json")
                .GET()
                .build();
            
            HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
            
            if (response.statusCode() == 200) {
                return mapper.readValue(response.body(), Map.class);
            } else {
                throw new RuntimeException("Status check failed: " + response.statusCode());
            }
            
        } catch (Exception e) {
            throw new RuntimeException("Status check failed", e);
        }
    }
}
```

## Rate Limits

| Endpoint           | Limit        | Window     |
| ------------------ | ------------ | ---------- |
| POST /process/     | 100 requests | per minute |
| GET /transactions/ | 300 requests | per minute |

Rate limit headers are included in responses:

* `X-RateLimit-Limit`: Request limit per window
* `X-RateLimit-Remaining`: Requests remaining in current window
* `X-RateLimit-Reset`: Unix timestamp when limit resets

## Next Steps

* Learn about Request Structure for proper API formatting
* Review Response Format for handling API responses
* Explore Payment Methods for supported options
* Check Error Handling for comprehensive error management