---
title: "Error Handling"
sidebarTitle: "Error Handling"
'og:description': ""
---

Comprehensive error handling is essential for building robust integrations with the Tonder API. This guide covers error response formats, common error scenarios, and HTTP status codes.

## Error Response Format

All errors follow a consistent format:

```json
{
  "error": {
    "code": "validation_error",
    "message": "Amount must be greater than 0",
    "type": "request_error",
    "details": {
      "field": "amount",
      "received_value": -10.00
    }
  },
  "request_id": "req_abc123"
}
```

Where:

| Field           | Type   | Description                           |
| --------------- | ------ | ------------------------------------- |
| `error.code`    | string | Specific error code                   |
| `error.message` | string | Human-readable error message          |
| `error.type`    | string | Error category                        |
| `error.details` | object | Additional error context              |
| `request_id`    | string | Unique request identifier for support |

## HTTP Status Codes

Here are the HTTP status codes that you may receive in the response:

### Success Codes

| Code | Category | Description                             | Action         |
| ---- | -------- | --------------------------------------- | -------------- |
| 200  | Success  | Request successful                      | Continue       |
| 201  | Success  | Transaction created                     | Continue       |
| 202  | Success  | Transaction accepted (async processing) | Monitor status |

### Client Error Codes

| Code | Category     | Description               | Action               |
| ---- | ------------ | ------------------------- | -------------------- |
| 400  | Client Error | Invalid request format    | Fix request          |
| 401  | Client Error | Authentication failed     | Check credentials    |
| 402  | Client Error | Payment required/declined | Try different method |
| 404  | Client Error | Resource not found        | Check ID             |
| 422  | Client Error | Validation failed         | Fix data             |
| 429  | Client Error | Rate limit exceeded       | Retry with backoff   |

### Server Error Codes

| Code | Category     | Description           | Action        |
| ---- | ------------ | --------------------- | ------------- |
| 500  | Server Error | Internal server error | Retry request |
| 502  | Server Error | Bad gateway           | Retry request |
| 503  | Server Error | Service unavailable   | Retry later   |

## Common Error Categories

Errors can belong to the following categories:

### Authentication Errors

| Code                      | Description                                     | Solution                                        |
| ------------------------- | ----------------------------------------------- | ----------------------------------------------- |
| `invalid_api_key`         | API key not found                               | Check API key                                   |
| `invalid_authentication`  | HMAC signature invalid or authentication failed | Verify signature calculation and field mappings |
| `authentication_required` | Missing authentication headers                  | Include required authentication headers         |

### Validation Errors

| Code               | Description            | Solution                             |
| ------------------ | ---------------------- | ------------------------------------ |
| `missing_field`    | Required field missing | Include required field               |
| `invalid_amount`   | Amount out of range    | Use valid amount (0.01 - 15,000,000) |
| `invalid_currency` | Currency not supported | Use supported currency               |
| `invalid_email`    | Email format invalid   | Use valid email format               |

### Payment Errors

| Code                 | Description                | Solution                     |
| -------------------- | -------------------------- | ---------------------------- |
| `card_declined`      | Card declined by issuer    | Try different card           |
| `insufficient_funds` | Not enough funds           | Try different payment method |
| `expired_card`       | Card has expired           | Use valid card               |
| `invalid_card`       | Card number invalid        | Check card details           |
| `processing_error`   | Temporary processing error | Retry request                |

### Withdrawal Errors

| Code                    | Description                 | Solution                   |
| ----------------------- | --------------------------- | -------------------------- |
| `invalid_clabe`         | CLABE number invalid        | Verify CLABE format        |
| `institution_not_found` | Bank code not found         | Use valid institution code |
| `insufficient_balance`  | Not enough balance          | Check account balance      |
| `beneficiary_blocked`   | Beneficiary account blocked | Contact bank               |

## Basic Error Handling

Here are some examples of how to handle errors in different programming languages:

<Accordion title="Error Handling Examples">

<CodeGroup>
```java Java
public class TonderApiException extends Exception {
    private final String errorCode;
    private final String errorType;
    private final int statusCode;
    
    // Constructor and getters...
}

public static PaymentResponse processPaymentWithErrorHandling(PaymentRequest request) {
    try {
        return processPayment(request);
        
    } catch (TonderApiException e) {
        switch (e.getErrorCode()) {
            case "card_declined":
                // Try alternative payment method
                return tryAlternativePayment(request);
                
            case "processing_error":
                // Retry with exponential backoff
                return retryPayment(request);
                
            case "invalid_authentication":
                // Check HMAC signature calculation and business configuration
                return fixAuthenticationAndRetry(request);
                
            case "invalid_amount":
                // Fix amount and retry
                request.setAmount(request.getAmount().max(BigDecimal.ONE));
                return processPayment(request);
                
            default:
                throw e; // Re-throw unhandled errors
        }
    }
}
```

```python Python
import time
import random

class TonderApiError(Exception):
    def __init__(self, message, code=None, status_code=None):
        super().__init__(message)
        self.code = code
        self.status_code = status_code

def process_payment_with_retry(request_data, max_retries=3):
    retryable_errors = ['processing_error', 'service_unavailable', 'rate_limit_exceeded']
    auth_errors = ['invalid_authentication', 'authentication_required']
    
    for attempt in range(max_retries + 1):
        try:
            return process_payment(request_data)
            
        except TonderApiError as e:
            if e.code in auth_errors:
                # Authentication errors usually require configuration fixes, not retries
                raise TonderApiError(f"Authentication failed: {e.message}. Check HMAC configuration.")
            elif e.code in retryable_errors and attempt < max_retries:
                # Exponential backoff with jitter
                delay = (2 ** attempt) + random.uniform(0, 1)
                time.sleep(delay)
                continue
            else:
                raise
    
    raise TonderApiError("Max retries exceeded")
```
</CodeGroup>
</Accordion>

## Common Troubleshooting

Here are some common troubleshooting checks for different error scenarios:

<Accordion title="Authentication Issues">

- Verify API key format: `Authorization: Token your_api_key`
- Check HMAC signature calculation matches expected format
- Ensure all required headers are included

</Accordion>

<Accordion title="Payment Failures">

- Check error code in response for specific failure reason
- Verify card data format and validity
- Test with known good test cards in sandbox

</Accordion>

<Accordion title="Validation Errors">

- Review required fields for each operation type
- Check data format requirements (email, amounts, etc.)
- Validate regional requirements (RFC, CLABE formats)

</Accordion>

## Next Steps

- [Review Webhooks](./webhooks) for real-time error notifications
- [Check Status Checking](./status-checking) for transaction monitoring
- [Learn about Payment Methods](./payment-methods) for method-specific error handling
- [Explore Mexican Banking Reference](./mexican-banking-reference) for regional validation