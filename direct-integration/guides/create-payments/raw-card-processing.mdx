---
title: "PCI Compliant Raw Card Processing"
sidebarTitle: "PCI Compliant Raw Card Processing"
---

To maintain PCI compliance and support merchants with existing PCI DSS Level 1 certification, Tonder provides PCI Compliant Raw Card Processing that allows direct processing of raw card data without tokenization. This approach eliminates the multi-step tokenization process while maintaining enterprise-grade security for qualified merchants.

<Note>
**For merchants with full PCI DSS compliance only.**

This approach allows you to send raw card data directly to Tonder without tokenization. Only use this if you are fully PCI DSS compliant.
</Note>

## Endpoints

There are two different endpoints for PCI compliant processing, one for testing and one for production:

| Environment | Endpoint | Purpose |
|-------------|----------|---------|
| **Testing** | `https://process-sandbox.tonder.io/` | PCI compliant testing |
| **Production** | `https://process.tonder.io/` | PCI compliant live transactions |

## Authentication

These are the required headers for the PCI compliant processing endpoints:

```http
Authorization: Token your_api_key
Content-Type: application/json
```

Use the same API token you can find on your Dashboard → Developers → API Keys → Public API Key.

## PCI Compliant Request

A reques to the PCI compliant processing endpoints should have the following structure:

<Accordion title="Request Structure">

```json
{
  "operation_type": "payment",
  "amount": 150.00,
  "currency": "MXN",
  "customer": {
    "name": "Ana María Rodríguez",
    "email": "ana.rodriguez@email.com"
  },
  "payment_method": {
    "type": "CARD",
    "card_number": "4444444444444455",
    "cardholder_name": "Ana María Rodríguez",
    "cvv": "123",
    "expiration_year": "26",
    "expiration_month": "07"
  },
  "client_reference": "order-789",
  "return_url": "https://mystore.com/payment/return"
}
```

</Accordion>

The following are some examples of requests using different languages:

<CodeGroup>

```bash cURL Example
curl -X POST https://process-sandbox.tonder.io/ \
  -H "Authorization: Token 04fbdd63113c009b6ac14c7d230b13909ae11221" \
  -H "Content-Type: application/json" \
  -d '{
    "operation_type": "payment",
    "amount": 150.00,
    "currency": "MXN",
    "customer": {
      "name": "Ana María Rodríguez",
      "email": "ana.rodriguez@email.com"
    },
    "payment_method": {
      "type": "CARD",
      "card_number": "4444444444444455",
      "cardholder_name": "Ana María Rodríguez",
      "cvv": "123",
      "expiration_year": "26",
      "expiration_month": "07"
    },
    "client_reference": "order-789",
    "return_url": "https://mystore.com/payment/return"
  }'
```

```python Python Example
import requests
import json

def process_pci_payment():
    """Process PCI compliant card payment"""
    
    # API configuration
    api_key = '04fbdd63113c009b6ac14c7d230b13909ae11221'
    sandbox_url = 'https://process-sandbox.tonder.io/'
    
    # Headers
    headers = {
        'Authorization': f'Token {api_key}',
        'Content-Type': 'application/json'
    }
    
    # Payment data
    payment_data = {
        'operation_type': 'payment',
        'amount': 150.00,
        'currency': 'MXN',
        'customer': {
            'name': 'Ana María Rodríguez',
            'email': 'ana.rodriguez@email.com'
        },
        'payment_method': {
            'type': 'CARD',
            'card_number': '4444444444444455',
            'cardholder_name': 'Ana María Rodríguez',
            'cvv': '123',
            'expiration_year': '26',
            'expiration_month': '07'
        },
        'client_reference': 'order-789',
        'return_url': 'https://mystore.com/payment/return'
    }
    
    try:
        # Make request
        response = requests.post(
            sandbox_url,
            headers=headers,
            json=payment_data,
            timeout=30
        )
        
        if response.status_code == 201:
            result = response.json()
            print(f"Payment successful: {result['id']}")
            return result
        else:
            error = response.json()
            print(f"Payment failed: {error}")
            return None
            
    except requests.exceptions.RequestException as e:
        print(f"Network error: {e}")
        return None

# Example usage
if __name__ == "__main__":
    payment_result = process_pci_payment()
    
    if payment_result:
        print(f"Transaction ID: {payment_result['id']}")
        print(f"Status: {payment_result['status']}")
        
        # Handle 3DS redirect if needed
        if 'next_action' in payment_result:
            next_action = payment_result['next_action']
            if 'redirect_to_url' in next_action:
                print(f"3DS Authentication required:")
                print(f"Redirect URL: {next_action['redirect_to_url']['url']}")
```


```javascript JavaScript Example
async function processPCIPayment() {
    // API configuration
    const apiKey = '04fbdd63113c009b6ac14c7d230b13909ae11221';
    const sandboxUrl = 'https://process-sandbox.tonder.io/';
    
    // Headers
    const headers = {
        'Authorization': `Token ${apiKey}`,
        'Content-Type': 'application/json'
    };
    
    // Payment data
    const paymentData = {
        operation_type: 'payment',
        amount: 150.00,
        currency: 'MXN',
        customer: {
            name: 'Ana María Rodríguez',
            email: 'ana.rodriguez@email.com'
        },
        payment_method: {
            type: 'CARD',
            card_number: '4444444444444455',
            cardholder_name: 'Ana María Rodríguez',
            cvv: '123',
            expiration_year: '26',
            expiration_month: '07'
        },
        client_reference: 'order-789',
        return_url: 'https://mystore.com/payment/return'
    };
    
    try {
        // Make request
        const response = await fetch(sandboxUrl, {
            method: 'POST',
            headers: headers,
            body: JSON.stringify(paymentData)
        });
        
        const result = await response.json();
        
        if (response.status === 201) {
            console.log(`Payment successful: ${result.id}`);
            
            // Handle 3DS redirect if needed
            if (result.next_action && result.next_action.redirect_to_url) {
                console.log('3DS Authentication required');
                console.log(`Redirect URL: ${result.next_action.redirect_to_url.url}`);
                
                // Redirect user to 3DS authentication
                window.location.href = result.next_action.redirect_to_url.url;
            }
            
            return result;
            
        } else {
            console.error('Payment failed:', result);
            return null;
        }
        
    } catch (error) {
        console.error('Network error:', error);
        return null;
    }
}

// Example usage
processPCIPayment()
    .then(result => {
        if (result) {
            console.log(`Transaction ID: ${result.id}`);
            console.log(`Status: ${result.status}`);
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
```

```java Java Example
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.net.URI;
import com.fasterxml.jackson.databind.ObjectMapper;

public class TonderPCIProcessor {
    
    private static final String SANDBOX_URL = "https://process-sandbox.tonder.io/";
    private static final String PRODUCTION_URL = "https://process.tonder.io/";
    
    public static void processPCIPayment(String apiKey) {
        try {
            ObjectMapper mapper = new ObjectMapper();
            
            Map<String, Object> paymentData = new HashMap<>();
            paymentData.put("operation_type", "payment");
            paymentData.put("amount", 150.00);
            paymentData.put("currency", "MXN");
            
            Map<String, String> customer = new HashMap<>();
            customer.put("name", "Ana María Rodríguez");
            customer.put("email", "ana.rodriguez@email.com");
            paymentData.put("customer", customer);
            
            Map<String, String> paymentMethod = new HashMap<>();
            paymentMethod.put("type", "CARD");
            paymentMethod.put("card_number", "4444444444444455");
            paymentMethod.put("cardholder_name", "Ana María Rodríguez");
            paymentMethod.put("cvv", "123");
            paymentMethod.put("expiration_year", "26");
            paymentMethod.put("expiration_month", "07");
            paymentData.put("payment_method", paymentMethod);
            
            paymentData.put("client_reference", "order-789");
            paymentData.put("return_url", "https://mystore.com/payment/return");
            
            String jsonBody = mapper.writeValueAsString(paymentData);
            
            HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create(SANDBOX_URL))
                .header("Authorization", "Token " + apiKey)
                .header("Content-Type", "application/json")
                .POST(HttpRequest.BodyPublishers.ofString(jsonBody))
                .build();
            
            HttpClient client = HttpClient.newHttpClient();
            HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
            
            if (response.statusCode() == 201) {
                System.out.println("Payment successful: " + response.body());
            } else {
                System.err.println("Payment failed: " + response.statusCode());
            }
            
        } catch (Exception e) {
            System.err.println("Error processing payment: " + e.getMessage());
        }
    }
}
```
</CodeGroup>

## Response Format

The reponse from the endpoints should have the following structure:

```json
{
  "amount": 150,
  "client_reference": "order-789",
  "created_at": "2025-09-04T23:03:33.778574Z",
  "currency": "MXN",
  "id": "2fd6a7fa-2997-434d-a8e0-1128cf7d00a3",
  "next_action": {
    "redirect_to_url": {
      "return_url": "https://mystore.com/payment/return?tndr_payment_id=45396",
      "url": "https://sandbox.cardpay.com/MI/payments/redirect?token=9e53b5de-76d5-4c59-82a8-09ad4e87f42a",
      "verify_transaction_status_url": "/transactions/2fd6a7fa-2997-434d-a8e0-1128cf7d00a3/"
    }
  },
  "operation_type": "payment",
  "payment_id": 45396,
  "provider": "tonder",
  "status": "Pending",
  "status_code": 201,
  "transaction_id": 8707
}
```

Where:

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Unique transaction identifier |
| `operation_type` | string | Always `"payment"` |
| `status` | string | Transaction status |
| `amount` | decimal | Transaction amount |
| `currency` | string | Currency code |
| `client_reference` | string | Your reference identifier |
| `payment_id` | integer | Internal payment ID |
| `transaction_id` | integer | Internal transaction ID |
| `provider` | string | Payment provider used |
| `created_at` | string | ISO 8601 timestamp |
| `status_code` | integer | HTTP status code |
| `next_action` | object | Required actions (3DS, redirects) |

## Test Cards

Use these test cards in the sandbox environment:

| Card Number | Expected Result |
|-------------|----------------|
| 4000 0000 0000 0077 | Successful payment                                  |
| 5451 9515 7492 5480 | Card declined                                       |
| 4456 5280 8038 9860 | 3ds authentication required                         |
| 4574 4412 1519 0335 | Processing error (No transaction recoded in Tonder) |
| 4349 0012 1084 6432 | Insufficient funds                                  |

## Status Values

The table below shows the different possible status values:

| Status | Description |
|--------|-------------|
| `Pending` | Transaction awaiting completion |
| `Success` | Payment completed successfully |
| `Failed` | Payment failed or declined |
| `Cancelled` | Transaction was cancelled |

## PCI Compliance Requirements

When processing raw card data, you must maintain full PCI DSS Level 1 compliance. This section provides the essential requirements and best practices to ensure secure card data handling.

<AccordionGroup>

<Accordion title="Critical Security Requirements">

These are the core security requirements for PCI compliant processing:

<Note>
**PCI DSS Level 1 Compliance Required**

Only use this approach if you are fully PCI DSS Level 1 compliant. This is mandatory for processing raw card data.
</Note>

- Protect stored, processed, and transmitted card data at all times
- Use TLS 1.2+ for all card data transmissions  
- Restrict access to card data on need-to-know basis only
- Log and monitor all access to cardholder data environments
- Continuously test security systems and processes
- Maintain ongoing compliance validation and documentation

</Accordion>

<Accordion title="Data Handling Requirements">

### Prohibited Actions

These are the prohibited actions with card data:

- Do not store CVV data after authorization
- Do not store card data without encryption or tokenization
- Do not log card numbers, CVV, or expiration dates
- Do not use HTTP without TLS 1.2+ encryption

### Required Actions

Allways make sure to perform these actions when processing card data:

- Check card data format before processing
- Confirm HTTPS before transmission
- Log all access to payment processing systems
- Apply security patches regularly

</Accordion>

</AccordionGroup>

## When to Use PCI Compliant Processing

This section explains when PCI compliant processing is recommended and when it is not. Use the information below to decide if this is the best approach for your business.

<AccordionGroup>

<Accordion title="Recommended For">

- Large Enterprise Merchants already PCI Level 1 certified
- Payment Processors operating under existing PCI compliance
- High-Volume Businesses processing significant card transaction volumes
- Existing PCI Infrastructure already handling raw card data securely

</Accordion>

<Accordion title="Not Recommended For">

- Small to Medium Businesses without existing PCI compliance
- New Integrations for first-time payment processing implementations
- Cost-Conscious Merchants where PCI compliance maintenance can be expensive
- Non-PCI Environments with systems not designed for secure card data handling

</Accordion>

</AccordionGroup>

## Comparison with Tokenized Processing

The table below compares PCI compliant processing with tokenized processing:

| Aspect | PCI Compliant Processing | Tokenized Processing |
|--------|-------------------------|---------------------|
| **API Calls** | 1 step (direct process) | 3 steps (auth → tokenize → process) |
| **PCI Compliance** | Full PCI DSS Level 1 required | Not required for merchant |
| **Integration Complexity** | Lower (single endpoint) | Higher (multiple endpoints) |
| **Latency** | Lower (direct processing) | Higher (additional API calls) |
| **Security Responsibility** | Merchant responsibility | Handled by Tonder/Skyflow |
| **Maintenance Cost** | Higher (compliance audits) | Lower |

<Note>
### Important PCI Compliance Notes
- Only use this approach if you are fully PCI DSS Level 1 compliant
- Raw card data must be handled securely throughout your entire system
- All PCI DSS requirements apply to your infrastructure and processes
- Regular compliance audits are required
</Note>

## Next Steps

- Review [Card Tokenization](./create-a-payment-with-a-card-token) for non-PCI compliant card processing
- Learn about [Process Transaction API](/reference/process-transaction) for using PCI endpoints in your integration
- Check [Payment Methods](../../payment-methods/payment-methods-overview) for card-specific implementation details
- Set up [Webhooks](../../webhooks/how-webhooks-works) for real-time payment notifications
- Review [HTTP Response Codes](../../http-response-codes) for payment error management
- Explore [Support Resources](../../resources/support) for additional guidance