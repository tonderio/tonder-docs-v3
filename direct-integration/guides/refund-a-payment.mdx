---
title: "Refund a Payment"
sidebarTitle: "Refund a Payment"
'og:description': "How to refund a completed payment"
---

Tonder's refund functionality enables merchants to return funds to customers for card transactions. You'll use this when you need to process customer returns, cancellations, or any situation requiring payment reversal. Refunds are processed through the same unified `/process/` endpoint using `operation_type: "refund"`.

<Note>
Refunds are only available for card payments. SPEI, OXXO, and Mercado Pago transactions cannot be refunded.
</Note>

## Prerequisites

- Tonder API credentials from your [Dashboard ‚Üí Developers ‚Üí API Keys](https://app.tonder.io/accounts/login/)
- The original transaction ID from the payment you want to refund. Learn how to [get transaction status and IDs](/reference/get-transaction-status).

<Warning>
**Important limitations:**
- **Card Payments Only**: Refunds work exclusively with credit and debit card transactions
- **One Refund Per Transaction**: Each transaction can only be refunded once (partial or full)
- **120-Day Window**: Refunds must be processed within 120 days after payment confirmation
</Warning>

## Processing a Refund

The refund process involves preparing your request data, sending it to the API, and handling the response appropriately.

### Step 1: Prepare your refund data

Gather the required information for your refund request. You'll need four essential fields:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `operation_type` | string | Yes | Must be `"refund"` |
| `amount` | decimal | Yes | Refund amount (can be partial or full) |
| `currency` | string | Yes | Currency code (must match original transaction) |
| `original_transaction_id` | string | Yes | ID of the original payment transaction |

For example, to refund $50.00 from a $100.00 original payment, your data structure would look like this:

```json
{
  "operation_type": "refund",
  "amount": 50.00,
  "currency": "MXN",
  "original_transaction_id": "6ada8797-235e-4674-86de-7b23e90e1163"
}
```

### Step 2: Send the refund request

Make a POST request to the [`/process/`](/reference/process-transaction) endpoint with your refund data. Here's how to do it using cURL:

```bash
curl -X POST https://stage.tonder.io/api/v1/process/ \
  -H "Authorization: Token YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "operation_type": "refund",
    "amount": 50.00,
    "currency": "MXN",
    "original_transaction_id": "6ada8797-235e-4674-86de-7b23e90e1163"
  }'
```

Replace `YOUR_API_KEY` with your actual API key from the Tonder dashboard. You should receive a response with a 201 status code indicating the refund was accepted for processing.

### Step 3: Handle the API response

A successful refund returns immediately with status information. Here's what a typical success response looks like:

```json
{
  "id": "07230c98-e749-4d27-a90d-6f3e117205aa",
  "operation_type": "refund",
  "status": "Success",
  "amount": 50.0,
  "currency": "MXN",
  "client_reference": null,
  "transaction_id": "20832559",
  "provider": "tonder",
  "created_at": "2025-09-18T15:38:38.157382Z",
  "status_code": 201,
  "original_transaction_id": "6ada8797-235e-4674-86de-7b23e90e1163",
  "reason": null,
  "refund_id": "74"
}
```

Key fields to pay attention to:

| Field | Description |
|-------|-------------|
| `id` | Unique refund transaction identifier for your records |
| `status` | `"Success"` means processed, `"Failed"` means retry needed |
| `amount` | Confirms the refunded amount |
| `refund_id` | Internal refund identifier for tracking |

<Note>
Check that the `status` field shows `"Success"` and the `amount` matches your intended refund amount.
</Note>

### Step 4: Implement error handling

Handle common refund errors by checking the response status and error messages. Here's a Python example that demonstrates proper error handling:

```python
import requests
import json

def process_refund_safely(original_transaction_id, refund_amount, api_key):
    """Process a refund with comprehensive error handling"""
    
    url = "https://stage.tonder.io/api/v1/process/"
    headers = {
        "Authorization": f"Token {api_key}",
        "Content-Type": "application/json"
    }
    
    refund_data = {
        "operation_type": "refund",
        "amount": refund_amount,
        "currency": "MXN",
        "original_transaction_id": original_transaction_id
    }
    
    try:
        response = requests.post(url, headers=headers, json=refund_data, timeout=30)
        
        if response.status_code == 201:
            result = response.json()
            print(f"‚úÖ Refund successful: {result['id']}")
            return {"success": True, "data": result}
        else:
            error = response.json()
            print(f"‚ùå Refund failed: {error}")
            return {"success": False, "error": error}
            
    except requests.exceptions.RequestException as e:
        print(f"üîå Network error: {e}")
        return {"success": False, "error": str(e)}

# Example usage
result = process_refund_safely(
    original_transaction_id="6ada8797-235e-4674-86de-7b23e90e1163",
    refund_amount=50.00,
    api_key="your_api_key_here"
)

if result["success"]:
    refund_data = result["data"]
    print(f"Refund ID: {refund_data['refund_id']}")
    print(f"Amount refunded: ${refund_data['amount']}")
else:
    print("Handle the error appropriately in your application")
```

This example shows how to properly structure your refund requests with timeout handling and clear success/failure logic.

For more comprehensive examples in different programming languages, here are some complete implementations:

<CodeGroup>

```python Python - Complete Implementation
import requests
import json

def process_refund(original_transaction_id, refund_amount):
    """Process refund for card transaction"""
    
    # API configuration
    api_key = '04fbdd63113c009b6ac14c7d230b13909ae11221'
    base_url = 'https://stage.tonder.io/api/v1/process/'
    
    # Headers
    headers = {
        'Authorization': f'Token {api_key}',
        'Content-Type': 'application/json'
    }
    
    # Refund data
    refund_data = {
        'operation_type': 'refund',
        'amount': refund_amount,
        'currency': 'MXN',
        'original_transaction_id': original_transaction_id
    }
    
    try:
        # Make refund request
        response = requests.post(
            base_url,
            headers=headers,
            json=refund_data,
            timeout=30
        )
        
        if response.status_code == 201:
            result = response.json()
            print(f"Refund successful: {result['id']}")
            return result
        else:
            error = response.json()
            print(f"Refund failed: {error}")
            return None
            
    except requests.exceptions.RequestException as e:
        print(f"Network error: {e}")
        return None

def process_partial_refund():
    """Example: Process partial refund"""
    original_transaction_id = "6ada8797-235e-4674-86de-7b23e90e1163"
    partial_amount = 50.00  # Refund $50 from original $100 payment
    
    return process_refund(original_transaction_id, partial_amount)

def process_full_refund():
    """Example: Process full refund"""
    original_transaction_id = "6ada8797-235e-4674-86de-7b23e90e1163"
    full_amount = 100.00  # Refund complete original amount
    
    return process_refund(original_transaction_id, full_amount)

# Example usage
if __name__ == "__main__":
    # Process partial refund
    partial_result = process_partial_refund()
    
    if partial_result:
        print(f"Partial refund processed: {partial_result['refund_id']}")
        print(f"Refund amount: ${partial_result['amount']}")
        print(f"Status: {partial_result['status']}")
```

```javascript JavaScript - Complete Implementation
async function processRefund(originalTransactionId, refundAmount) {
    // API configuration
    const apiKey = '04fbdd63113c009b6ac14c7d230b13909ae11221';
    const baseUrl = 'https://stage.tonder.io/api/v1/process/';
    
    // Headers
    const headers = {
        'Authorization': `Token ${apiKey}`,
        'Content-Type': 'application/json'
    };
    
    // Refund data
    const refundData = {
        operation_type: 'refund',
        amount: refundAmount,
        currency: 'MXN',
        original_transaction_id: originalTransactionId
    };
    
    try {
        // Make refund request
        const response = await fetch(baseUrl, {
            method: 'POST',
            headers: headers,
            body: JSON.stringify(refundData)
        });
        
        const result = await response.json();
        
        if (response.status === 201) {
            console.log(`Refund successful: ${result.id}`);
            return result;
        } else {
            console.error('Refund failed:', result);
            return null;
        }
        
    } catch (error) {
        console.error('Network error:', error);
        return null;
    }
}

async function processPartialRefund() {
    // Example: Process partial refund
    const originalTransactionId = "6ada8797-235e-4674-86de-7b23e90e1163";
    const partialAmount = 50.00; // Refund $50 from original $100 payment
    
    return await processRefund(originalTransactionId, partialAmount);
}

async function processFullRefund() {
    // Example: Process full refund
    const originalTransactionId = "6ada8797-235e-4674-86de-7b23e90e1163";
    const fullAmount = 100.00; // Refund complete original amount
    
    return await processRefund(originalTransactionId, fullAmount);
}

// Example usage
processPartialRefund()
    .then(result => {
        if (result) {
            console.log(`Partial refund processed: ${result.refund_id}`);
            console.log(`Refund amount: $${result.amount}`);
            console.log(`Status: ${result.status}`);
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
```

</CodeGroup>

## Troubleshooting

Check the following common errors and how to resolve them:

<AccordionGroup>

<Accordion title="Already Refunded Error">

```json
{
  "error": "Invalid request data",
  "details": "Transaction has already been refunded"
}
```

Cause: Attempting to refund a transaction that has already been refunded (partial or full)
Resolution: Each transaction can only be refunded once
Prevention: Keep a local record of refunded transactions to avoid duplicate attempts.

</Accordion>

<Accordion title="Invalid Refund Amount Error">

```json
{
  "error": "Invalid request data",
  "details": "Refund requested amount is greater that original amount"
}
```

Cause: Refund amount exceeds the original transaction amount
Resolution: Ensure refund amount is less than or equal to original payment amount
Prevention: Validate refund amounts against original transaction amounts before sending requests.

</Accordion>

<Accordion title="Transaction Not Found or Not Refundable">

```json
{
  "error": "Invalid request data",
  "details": "Original transaction not found or not refundable"
}
```

Common Causes:
    - Invalid transaction ID: Original transaction ID does not exist
    - Non-card payment: Attempting to refund SPEI, OXXO, or Mercado Pago transaction
    - Outside 120-day window: Transaction is older than 120 days
    - Transaction not completed: Original payment not in successful state
Solution: Verify the transaction ID is correct and the transaction is a completed card payment.

</Accordion>

<Accordion title="Network timeouts or connection errors">

Symptoms: Request timeouts, connection refused, or network-related exceptions
Solution: Implement retry logic with exponential backoff for network-related failures.
Prevention: Always use appropriate timeout values (recommended: 30 seconds) in your HTTP requests.

</Accordion>

</AccordionGroup>

## See also

- [Payment Methods Overview](/direct-integration/payment-methods/payment-methods-overview) - Understanding which transactions can be refunded
- [`/process/` API Reference](/reference/process-transaction) - Complete API documentation with additional examples
- [Webhooks Guide](/direct-integration/webhooks/how-webhooks-works) - Setting up real-time notifications for refund status changes

## Next Steps

Now that you can process refunds, consider these next steps to enhance your payment system:

- Set up [webhooks](/direct-integration/webhooks/how-webhooks-works) to receive real-time notifications when refund statuses change, ensuring your system stays synchronized with payment updates
- Implement proper logging and audit trails for refund operations to maintain compliance and help with customer service inquiries
- Consider integrating refund functionality into your customer-facing interfaces to allow self-service refund requests