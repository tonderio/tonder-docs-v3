---
title: "Withdrawals"
sidebarTitle: "Withdrawals"
'og:description': ""
---

## Overview

Tonder's withdrawal functionality enables businesses to send payouts to beneficiaries through the same unified `/process/` endpoint. Withdrawals support SPEI bank transfers and direct debit card deposits, providing flexible payout options across Mexico.

These are the withdrawal methods supported by Tonder:

| Method         | ID           | Description            | Processing Time |
| -------------- | ------------ | ---------------------- | --------------- |
| **SPEI**       | `SPEI`       | Bank account transfers | Same day        |
| **Debit Card** | `DEBIT_CARD` | Direct card deposits   | Instant         |

## Withdrawal Request Structure

All withdrawal requests use `operation_type: "withdrawal"` and must include beneficiary information.

The following fields are required for withdrawal requests:

| Field             | Type    | Required | Description                                  |
| ----------------- | ------- | -------- | -------------------------------------------- |
| `operation_type`  | string  | Yes      | Must be `"withdrawal"`                       |
| `amount`          | decimal | Yes      | Withdrawal amount                            |
| `currency`        | string  | No       | Currency code (default: `"MXN"`)             |
| `transfer_method` | string  | Yes      | Transfer method (`"SPEI"` or `"DEBIT_CARD"`) |
| `beneficiary`     | object  | Yes      | Beneficiary information                      |
| `reference`       | string  | No       | Your withdrawal reference                    |
| `description`     | string  | No       | Withdrawal description                       |

The `beneficiary` object includes the following fields:

| Field                       | Type   | Required | Description                |
|-----------------------------|--------|----------|----------------------------|
| `beneficiary.account`       | string | Yes      | Account number or CLABE    |
| `beneficiary.name`          | string | Yes      | Beneficiary full name      |
| `beneficiary.rfc`           | string | Yes      | Mexican tax ID (RFC)       |
| `beneficiary.institution`   | string | Yes      | Bank institution code      |
| `beneficiary.email`         | string | Yes      | Beneficiary email          |

## SPEI Withdrawals

SPEI withdrawals transfer funds directly to Mexican bank accounts using the SPEI interbank system. Processing typically completes on the same business day.

<AccordionGroup>

<Accordion title="SPEI withdrawal request example">
```json
{
  "operation_type": "withdrawal",
  "amount": 750.00,
  "currency": "MXN",
  "reference": "payout-001",
  "transfer_method": "SPEI",
  "description": "Commission payment",
  "beneficiary": {
    "account": "012345678901234567",
    "name": "Roberto Martínez García",
    "rfc": "MAGR850920XY1",
    "institution": "40012",
    "email": "roberto.martinez@email.com"
  }
}
```

</Accordion>

<Accordion title="SPEI response example">
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "operation_type": "withdrawal",
  "status": "processing",
  "amount": 750.00,
  "currency": "MXN",
  "merchant_reference": "payout-001",
  "transfer_method": "SPEI",
  "beneficiary": {
    "account": "***************4567",
    "name": "Roberto Martínez García",
    "institution": "40012"
  },
  "created_at": "2024-07-26T10:30:00Z",
  "status_code": 201
}
```

</Accordion>
</AccordionGroup>

### SPEI Account Validation

SPEI validates accounts using the CLABE format, which is a 18-digit bank account number format used in Mexico. It consists of the following components:

- Total length: 18 digits
- Bank code: 3 digits (positions 1-3)
- Branch code: 3 digits (positions 4-6)
- Account number: 11 digits (positions 7-17)
- Check digit: 1 digit (position 18)

**Example CLABE Breakdown:**

```
CLABE: 012345678901234567
│││└─────────────────── Account number (11 digits)
││└─────────────────────── Branch code (3 digits)
│└──────────────────────── Bank code (3 digits)
└───────────────────────── Check digit (1 digit)
```

### Institution Codes

Major Mexican financial institutions and their corresponding codes for SPEI transactions:

| Code  | Bank Name    | CLABE Prefix |
| ----- | ------------ | ------------ |
| 40012 | BBVA México  | 012          |
| 40014 | Santander    | 014          |
| 40021 | HSBC         | 021          |
| 40072 | Banorte      | 072          |
| 40646 | STP          | 646          |
| 40137 | Banregio     | 137          |
| 40058 | Banco Azteca | 058          |

## Debit Card Withdrawals

Debit card withdrawals enable instant deposits directly to debit cards, providing immediate fund availability to beneficiaries.

<AccordionGroup>

<Accordion title="Debit card withdrawal request example">
```json
{
  "operation_type": "withdrawal",
  "amount": 500.00,
  "currency": "MXN",
  "reference": "card-payout-002",
  "transfer_method": "DEBIT_CARD",
  "description": "Instant payout to debit card",
  "beneficiary": {
    "account": "4111111111111111",
    "name": "Ana María González",
    "rfc": "GOAN850315AB2",
    "institution": "40012",
    "email": "ana.gonzalez@email.com"
  }
}
```

</Accordion>

<Accordion title="Debit card response example">
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440002",
  "operation_type": "withdrawal",
  "status": "processing",
  "amount": 500.00,
  "currency": "MXN",
  "merchant_reference": "card-payout-002",
  "transfer_method": "DEBIT_CARD",
  "beneficiary": {
    "account": "****1111",
    "name": "Ana María González",
    "institution": "40012"
  },
  "created_at": "2024-07-26T11:15:00Z",
  "status_code": 201
}
```

</Accordion>

</AccordionGroup>

## Withdrawal Status Flow

Withdrawals have their own status flow, which is different from payments.

| Status       | Description                     | Next Steps             |
| ------------ | ------------------------------- | ---------------------- |
| `pending`    | Withdrawal request received     | Monitor for processing |
| `processing` | Transfer being processed        | Wait for completion    |
| `success`    | Transfer completed successfully | Transaction complete   |
| `failed`     | Transfer failed                 | Check error details    |
| `declined`   | Transfer declined by bank       | Try different account  |

### Status Check

Use the transaction status endpoint to monitor withdrawal progress:

```http
GET /transactions/{withdrawal_id}/
```

<Accordion title="Status check response">
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "operation_type": "withdrawal",
  "status": "success",
  "amount": 750.00,
  "currency": "MXN",
  "merchant_reference": "payout-001",
  "created_at": "2024-07-26T10:30:00Z",
  "updated_at": "2024-07-26T14:45:22Z",
  "completion_details": {
    "completed_at": "2024-07-26T14:45:22Z",
    "reference_number": "SPEI123456789"
  }
}
```

</Accordion>

## Implementation Examples

Below you'll find examples of how to implement withdrawals in different programming languages.

<CodeGroup>

```python Python Implementation
def process_spei_withdrawal():
    """Process SPEI withdrawal to bank account"""
    
    withdrawal_data = {
        "operation_type": "withdrawal",
        "amount": 750.00,
        "currency": "MXN",
        "reference": "payout-001",
        "transfer_method": "SPEI",
        "description": "Commission payment",
        "beneficiary": {
            "account": "012345678901234567",
            "name": "Roberto Martínez García",
            "rfc": "MAGR850920XY1",
            "institution": "40012",
            "email": "roberto.martinez@email.com"
        }
    }
    
    try:
        response = tonder_api.process_withdrawal(withdrawal_data)
        print(f"Withdrawal initiated: {response['id']}")
        return response
        
    except Exception as e:
        print(f"Withdrawal failed: {e}")
        return None

def process_card_withdrawal():
    """Process withdrawal to debit card"""
    
    withdrawal_data = {
        "operation_type": "withdrawal",
        "amount": 500.00,
        "currency": "MXN",
        "reference": "card-payout-002",
        "transfer_method": "DEBIT_CARD",
        "description": "Instant payout to debit card",
        "beneficiary": {
            "account": "4111111111111111",
            "name": "Ana María González",
            "rfc": "GOAN850315AB2",
            "institution": "40012",
            "email": "ana.gonzalez@email.com"
        }
    }
    
    try:
        response = tonder_api.process_withdrawal(withdrawal_data)
        print(f"Card withdrawal initiated: {response['id']}")
        return response
        
    except Exception as e:
        print(f"Card withdrawal failed: {e}")
        return None
```

```java Java Implementation
public class WithdrawalProcessor {
    
    public Map<String, Object> processSPEIWithdrawal() {
        Map<String, Object> withdrawalData = new HashMap<>();
        withdrawalData.put("operation_type", "withdrawal");
        withdrawalData.put("amount", new BigDecimal("750.00"));
        withdrawalData.put("currency", "MXN");
        withdrawalData.put("reference", "payout-001");
        withdrawalData.put("transfer_method", "SPEI");
        withdrawalData.put("description", "Commission payment");
        
        Map<String, String> beneficiary = new HashMap<>();
        beneficiary.put("account", "012345678901234567");
        beneficiary.put("name", "Roberto Martínez García");
        beneficiary.put("rfc", "MAGR850920XY1");
        beneficiary.put("institution", "40012");
        beneficiary.put("email", "roberto.martinez@email.com");
        withdrawalData.put("beneficiary", beneficiary);
        
        try {
            return tonderAPI.processTransaction(withdrawalData);
        } catch (Exception e) {
            System.err.println("SPEI withdrawal failed: " + e.getMessage());
            return null;
        }
    }
    
    public Map<String, Object> processCardWithdrawal() {
        Map<String, Object> withdrawalData = new HashMap<>();
        withdrawalData.put("operation_type", "withdrawal");
        withdrawalData.put("amount", new BigDecimal("500.00"));
        withdrawalData.put("currency", "MXN");
        withdrawalData.put("reference", "card-payout-002");
        withdrawalData.put("transfer_method", "DEBIT_CARD");
        withdrawalData.put("description", "Instant payout to debit card");
        
        Map<String, String> beneficiary = new HashMap<>();
        beneficiary.put("account", "4111111111111111");
        beneficiary.put("name", "Ana María González");
        beneficiary.put("rfc", "GOAN850315AB2");
        beneficiary.put("institution", "40012");
        beneficiary.put("email", "ana.gonzalez@email.com");
        withdrawalData.put("beneficiary", beneficiary);
        
        try {
            return tonderAPI.processTransaction(withdrawalData);
        } catch (Exception e) {
            System.err.println("Card withdrawal failed: " + e.getMessage());
            return null;
        }
    }
}
```

</CodeGroup>

## Validation Requirements

Withdrawals can go through a validation process to ensure the data is correct.

### RFC Validation

RFC is used to validate the beneficiary's tax identification number. This is a 12-13 alphanumeric characters format and can be either an individual or business RFC.


| Type          | Structure                                                                 | Example            |
|---------------|--------------------------------------------------------------------------|--------------------|
| **Individual**| 4 letters from the name <br/> 6 digits for date of birth (YYMMDD) <br/> 3 alphanumeric characters | `MAGR850920XY1`    |
| **Business**  | 3 letters from the business name <br/> 6 digits for registration date (YYMMDD) <br/> 3 alphanumeric characters | `ABC9901011A2`     |

*For individuals, the RFC is generated from the person's name and date of birth. For businesses, it's based on the business name and registration date.*

### Account Number Validation

Account number is used to validate the beneficiary's bank account number. This is a 18 digits number and can be either a SPEI/CLABE or a debit card number.


| Type            | Validation Criteria                                                                                  |
|-----------------|-----------------------------------------------------------------------------------------------------|
| **SPEI/CLABE**  | - Exactly 18 digits<br/>- Valid checksum digit<br/>- Recognised bank code                           |
| **Debit Card**  | - 13–19 digits<br/>- Valid card number format<br/>- Must be a debit card (not a credit card)        |

## Error Handling

Here you'll find the common errors that can happen when processing withdrawals.

| Error Code              | Description                 | Solution                   |
| ----------------------- | --------------------------- | -------------------------- |
| `invalid_clabe`         | CLABE number invalid        | Verify CLABE format        |
| `institution_not_found` | Bank code not found         | Use valid institution code |
| `insufficient_balance`  | Not enough balance          | Check account balance      |
| `beneficiary_blocked`   | Beneficiary account blocked | Contact bank               |
| `invalid_rfc`           | RFC format invalid          | Use valid RFC format       |
| `amount_too_high`       | Exceeds withdrawal limits   | Reduce amount              |

<Accordion title="Error response example">
```json
{
  "error": {
    "code": "invalid_clabe",
    "message": "CLABE number format is invalid",
    "type": "validation_error",
    "details": {
      "field": "beneficiary.account",
      "received_value": "12345678901234567"
    }
  },
  "request_id": "req_abc123"
}
```

</Accordion>

## SPEI Operating Schedule

Here are some information about the operating hours for SPEI transactions.

| Day/Period                | Processing Hours                | Notes                        |
|---------------------------|---------------------------------|------------------------------|
| Monday to Friday          | 6:00 AM – 6:00 PM (CDMX time)   | Same-day processing if before 5:00 PM |
| Saturday                  | 9:00 AM – 2:00 PM               | Limited processing           |
| Sunday                    | No processing                   |                              |
| Bank holidays             | No processing                   |                              |

<Note>
**Processing Times for Withdrawals**

Withdrawals are processed according to the method and the time you submit your request:

- **Same business day**: Requests before 5:00 PM (CDMX) on business days are processed the same day.
- **Next business day**: Requests after 5:00 PM or on weekends are processed the next business day.
- **Instant**: Debit card withdrawals are instant, 24/7.
</Note>

## Best Practices

Here you'll find some best practices to follow when processing withdrawals.

<AccordionGroup>

<Accordion title="Beneficiary Data">

1. Validate RFC format – Make sure the RFC is in the correct format before you send it off.
2. Verify CLABE numbers – Double-check the CLABE, including the checksum digit, to avoid rejections.
3. Use correct institution codes – Always match the bank with the right institution code.
4. Test with sandbox data – Run your integration in the sandbox first to catch any issues before going live.

</Accordion>

<Accordion title="Transaction Management">

1. Implement status checking – Keep an eye on your withdrawals by checking their status regularly.
2. Handle async processing – Set up webhooks so you get notified when the status changes.
3. Store references – Save your own internal references for easy tracking and reconciliation.
4. Retry failed transactions – Add retry logic for temporary hiccups, so you don't miss a payout.

</Accordion>

<Accordion title="Security">

1. Validate beneficiary data – Only pay out to legitimate recipients; double-check their details.
2. Implement approval workflows – For big withdrawals, add a manual approval step to stay safe.
3. Monitor for fraud – Keep an eye out for anything dodgy or out of the ordinary.
4. Secure beneficiary storage – Make sure any stored beneficiary info is properly protected.

</Accordion>

<Accordion title="Error Recovery">

1. Graceful failure handling – Give clear, helpful error messages if something goes wrong.
2. Alternative methods – If one transfer method fails, offer another way to get the money out.
3. Manual intervention – Be ready to step in and handle tricky cases by hand if needed.
4. Customer communication – Keep your beneficiaries in the loop about what's happening with their withdrawal.

</Accordion>

</AccordionGroup>

## Testing

Here you'll find some information about the test bank accounts and cards that you can use to test your withdrawals.

### Test Bank Accounts

| CLABE              | Scenario            | Expected Result               |
| ------------------ | ------------------- | ----------------------------- |
| 646180157000000004 | Successful transfer | `processing` status           |
| 012345678901234567 | Invalid checksum    | Validation error              |
| 999999999999999999 | Non-existent bank   | `institution_not_found` error |

### Test Cards

| Card Number      | Scenario              | Expected Result     |
| ---------------- | --------------------- | ------------------- |
| 4111111111111111 | Successful withdrawal | `processing` status |
| 4000000000000002 | Declined card         | `declined` status   |
| 5555555555554444 | Processing error      | `failed` status     |

## Next Steps

- [Review Response Format](#spei-response-example) for handling withdrawal responses
- [Set up Webhooks](../integration/webhooks) for real-time withdrawal notifications
- [Check Error Handling](../integration/error-handling) for withdrawal error management
- [Explore Mexican Banking Reference](https://www.banxico.org.mx/cep/) for additional bank information